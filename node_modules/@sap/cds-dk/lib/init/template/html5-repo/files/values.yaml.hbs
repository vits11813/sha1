---
html5-apps-repo-host:
  serviceOfferingName: html5-apps-repo
  servicePlanName: app-host
html5-apps-deployer:
  env:
    SAP_CLOUD_SERVICE: {{strippedAppName}}.service
    {{#hasIas}}
    IAS_DEPENDENCY_NAME: {{appName}}-ias-dependency
    {{/hasIas}}
  image:
    repository: {{appName}}-html5-deployer
  bindings:
    {{#hasXsuaa}}
    xsuaa:
      serviceInstanceName: xsuaa
    {{/hasXsuaa}}
    {{#hasIas}}
    identity:
      serviceInstanceName: identity
      parameters:
        credential-type: X509_GENERATED
        app-identifier: html5-deployer
    {{/hasIas}}
    destination:
      serviceInstanceName: destination
    html5-apps-repo:
      serviceInstanceName: html5-apps-repo-host
  resources:
    limits:
      cpu: 2000m
      memory: 1G
    requests:
      cpu: 1000m
      memory: 1G
{{=<% %>=}}
  envFrom:
    - configMapRef:
        name: "{{ .Release.Name }}-html5-apps-deployer-configmap"
<%={{ }}=%>
backendDestinations:
  srv-api:
    service: srv
destination:
  parameters:
    HTML5Runtime_enabled: true
{{#hasApprouter}}
html5-apps-repo-runtime:
  serviceOfferingName: html5-apps-repo
  servicePlanName: app-runtime
approuter:
  bindings:
    html5-apps-repo-runtime:
      serviceInstanceName: html5-apps-repo-runtime
{{/hasApprouter}}
{{#hasMultitenancy}}
sidecar:
  bindings:
    html5-apps-repo-host:
      serviceInstanceName: html5-apps-repo-host
{{/hasMultitenancy}}
